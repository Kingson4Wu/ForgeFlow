"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2857],{5529:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>i,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"custom-nodes","title":"ForgeFlow Rule System - Custom AI CLI Rules","description":"Learn how to create custom rules for ForgeFlow automation. Configure behavior for Qwen, Gemini, Claude AI CLIs based on output conditions.","source":"@site/docs/custom-nodes.md","sourceDirName":".","slug":"/custom-nodes","permalink":"/ForgeFlow/docs/custom-nodes","draft":false,"unlisted":false,"editUrl":"https://github.com/kingson4wu/ForgeFlow/edit/main/documentation/docs/custom-nodes.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"ForgeFlow Rule System - Custom AI CLI Rules","description":"Learn how to create custom rules for ForgeFlow automation. Configure behavior for Qwen, Gemini, Claude AI CLIs based on output conditions."},"sidebar":"tutorialSidebar","previous":{"title":"ForgeFlow Configuration Guide - AI CLI Automation","permalink":"/ForgeFlow/docs/configuration"},"next":{"title":"ForgeFlow Task Types - Automation Workflows","permalink":"/ForgeFlow/docs/deployment"}}');var s=t(4848),r=t(8453);const i={sidebar_position:4,title:"ForgeFlow Rule System - Custom AI CLI Rules",description:"Learn how to create custom rules for ForgeFlow automation. Configure behavior for Qwen, Gemini, Claude AI CLIs based on output conditions."},l="Rule System",c={},u=[{value:"Understanding Rules",id:"understanding-rules",level:2},{value:"Default Rules",id:"default-rules",level:2},{value:"Project-Specific Rules",id:"project-specific-rules",level:2},{value:"Rule File Resolution Order",id:"rule-file-resolution-order",level:3},{value:"Rule Structure",id:"rule-structure",level:2},{value:"Creating Custom Rules",id:"creating-custom-rules",level:2},{value:"Rule Evaluation Order",id:"rule-evaluation-order",level:2},{value:"Advanced Rule Concepts",id:"advanced-rule-concepts",level:2},{value:"Input Prompt Detection",id:"input-prompt-detection",level:3},{value:"Recovery Strategies",id:"recovery-strategies",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Built-in Rule Categories",id:"built-in-rule-categories",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"rule-system",children:"Rule System"})}),"\n",(0,s.jsx)(n.p,{children:"ForgeFlow's rule system allows you to customize the behavior of the automation engine by defining specific conditions and responses. Rules determine what commands to send based on the output from AI CLI tools."}),"\n",(0,s.jsx)(n.h2,{id:"understanding-rules",children:"Understanding Rules"}),"\n",(0,s.jsx)(n.p,{children:'Rules in ForgeFlow are simple conditional statements that follow the pattern: "If condition is met, then execute command". The system evaluates rules in order, and the first matching rule is executed.'}),"\n",(0,s.jsx)(n.p,{children:"Each rule consists of:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Check condition"}),": A function that takes the session output as input and returns a boolean"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Command"}),": The text to send to the AI CLI when the condition is met"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"default-rules",children:"Default Rules"}),"\n",(0,s.jsx)(n.p,{children:"ForgeFlow comes with a comprehensive set of default rules for common AI CLI tools:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Input Detection"}),": Detect when the AI CLI is waiting for input"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Task Processing Detection"}),": Detect when the AI is actively processing a task"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Response Handling"}),": Handle various response patterns from the AI"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Timeout Recovery"}),": Implement recovery strategies when the AI stops responding"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"project-specific-rules",children:"Project-Specific Rules"}),"\n",(0,s.jsxs)(n.p,{children:["To create project-specific rules, create a file named ",(0,s.jsx)(n.code,{children:"{project_name}_rules.py"})," or ",(0,s.jsx)(n.code,{children:"{project_name}.py"})," in your project directory. For example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"myproject_rules.py\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The system will automatically load these rules when you run ForgeFlow with the ",(0,s.jsx)(n.code,{children:"--project myproject"})," flag."]}),"\n",(0,s.jsx)(n.h3,{id:"rule-file-resolution-order",children:"Rule File Resolution Order"}),"\n",(0,s.jsx)(n.p,{children:"ForgeFlow searches for rule files in the following order:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"{project_name}_rules.py"})," in the current working directory"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"{project_name}.py"})," in the current working directory"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"{project_name}_rules.py"})," in the ",(0,s.jsx)(n.code,{children:"user_custom_rules/"})," directory"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"{project_name}.py"})," in the ",(0,s.jsx)(n.code,{children:"user_custom_rules/"})," directory"]}),"\n",(0,s.jsx)(n.li,{children:"Built-in default rules in the codebase"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"rule-structure",children:"Rule Structure"}),"\n",(0,s.jsx)(n.p,{children:"A basic rule definition looks like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from forgeflow.core.rules import Rule\n\nRule(\n    check=lambda output: "some condition" in output,\n    command="command to send when condition is met"\n)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"creating-custom-rules",children:"Creating Custom Rules"}),"\n",(0,s.jsx)(n.p,{children:"To create custom rules, define them in your project-specific rules file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# In your myproject_rules.py file\nfrom forgeflow.core.rules import Rule\n\n# Rule to detect when AI asks for more information\nRule(\n    check=lambda output: "How can I help you" in output or "What would you like me to do" in output,\n    command="Please implement the next task in the TODO list."\n)\n\n# Rule to handle error responses\nRule(\n    check=lambda output: "error" in output.lower() or "failed" in output.lower(),\n    command="Please review the error and suggest a fix."\n)\n\n# Rule to continue when AI finishes a task\nRule(\n    check=lambda output: "completed" in output.lower() or "done" in output.lower(),\n    command="Please move on to the next task in the list."\n)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"rule-evaluation-order",children:"Rule Evaluation Order"}),"\n",(0,s.jsx)(n.p,{children:"Rules are evaluated in the order they are defined. The system uses priority matching, meaning the first rule whose condition is met will execute its command. This allows you to define more specific rules first and more general rules later."}),"\n",(0,s.jsx)(n.h2,{id:"advanced-rule-concepts",children:"Advanced Rule Concepts"}),"\n",(0,s.jsx)(n.h3,{id:"input-prompt-detection",children:"Input Prompt Detection"}),"\n",(0,s.jsx)(n.p,{children:"Different AI CLI tools have different input prompt patterns. The rule system uses regular expressions to detect when the AI is ready for input:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"Rule(\n    check=lambda output: \"gemini\" in output.split('\\n')[-1] if output.split('\\n') else False,  # Simplified example\n    command=\"Next task from the list: \"\n)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"recovery-strategies",children:"Recovery Strategies"}),"\n",(0,s.jsx)(n.p,{children:"Rules can implement timeout recovery strategies:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'Rule(\n    check=lambda output: "no response" in output.lower(),  # This would be triggered by a timeout mechanism\n    command="ESC + backspace to clear and continue"\n)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Place more specific rules before general ones"}),"\n",(0,s.jsx)(n.li,{children:"Test rules thoroughly to avoid unexpected behavior"}),"\n",(0,s.jsx)(n.li,{children:"Use descriptive names and comments for complex conditions"}),"\n",(0,s.jsx)(n.li,{children:"Consider edge cases in AI responses"}),"\n",(0,s.jsx)(n.li,{children:"Leverage regex for pattern matching when appropriate"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"built-in-rule-categories",children:"Built-in Rule Categories"}),"\n",(0,s.jsx)(n.p,{children:"ForgeFlow includes several categories of built-in rules:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Prompt Detection Rules"}),": Identify when the AI CLI is ready for input"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Task Status Rules"}),": Monitor task processing status"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Error Handling Rules"}),": Respond to error conditions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Timeout Recovery Rules"}),": Handle stalled conversations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Task Completion Rules"}),": Detect when tasks are completed"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The rule system provides flexibility to customize ForgeFlow's behavior for your specific project needs and AI CLI tools."})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var o=t(6540);const s={},r=o.createContext(s);function i(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);