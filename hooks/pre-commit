#!/bin/bash
# pre-commit hook: Run code quality checks

STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM)

black .
ruff check . --fix

if [ -n "$STAGED_FILES" ]; then
  git add $STAGED_FILES
fi

# Run unified health check script
chmod +x scripts/check-health.sh
./scripts/check-health.sh

# Note: We're not failing the commit even if health checks fail
# This allows us to commit works in progress
# Health checks should be run manually before pushing
echo "Pre-commit checks completed (not blocking commit)!"
